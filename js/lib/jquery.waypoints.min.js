!function(){"use strict";function t(o){if(!o)throw new Error("No options passed to Waypoint constructor");if(!o.element)throw new Error("No element option passed to Waypoint constructor");if(!o.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in i)e.push(i[o]);for(var n=0,r=e.length;r>n;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){e.didScroll&&!n.isTouch||(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var o=e[i],n=o.newScroll>o.oldScroll,r=n?o.forward:o.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s],l=o.oldScroll<a.triggerPoint,h=o.newScroll>=a.triggerPoint,p=l&&h,c=!l&&!h;(p||c)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}for(var u in t)t[u].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;n>o;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var r in t){var s=t[r];for(var a in this.waypoints[r]){var l,h,p,c,u,d=this.waypoints[r][a],f=d.options.offset,w=d.triggerPoint,y=0,g=null==w;d.element!==d.element.window&&(y=d.adapter.offset()[s.offsetProp]),"function"==typeof f?f=f.apply(d):"string"==typeof f&&(f=parseFloat(f),d.options.offset.indexOf("%")>-1&&(f=Math.ceil(s.contextDimension*f/100))),l=s.contextScroll-s.contextOffset,d.triggerPoint=y+l-f,h=w<s.oldScroll,p=d.triggerPoint>=s.oldScroll,c=h&&p,u=!h&&!p,!g&&c?(d.queueTrigger(s.backward),o[d.group.id]=d.group):!g&&u?(d.queueTrigger(s.forward),o[d.group.id]=d.group):g&&s.oldScroll>=d.triggerPoint&&(d.queueTrigger(s.forward),o[d.group.id]=d.group)}}return n.requestAnimationFrame(function(){for(var t in o)o[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},n.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i],n="up"===i||"left"===i;o.sort(n?e:t);for(var r=0,s=o.length;s>r;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints),o=i===this.waypoints.length-1;return o?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(i,o){t[o]=e[o]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&(o=t.extend({},arguments[1]),o.handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});"string"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9pbWFrZXdlYnRoaW5ncy13YXlwb2ludHMtMDk0NGUxNS9saWIvanF1ZXJ5LndheXBvaW50cy5taW4uanMiXSwibmFtZXMiOlsiV2F5cG9pbnQiLCJvcHRpb25zIiwiRXJyb3IiLCJlbGVtZW50IiwiaGFuZGxlciIsInRoaXMiLCJrZXkiLCJrZXlDb3VudGVyIiwiQWRhcHRlciIsImV4dGVuZCIsImRlZmF1bHRzIiwiYWRhcHRlciIsImNhbGxiYWNrIiwiYXhpcyIsImhvcml6b250YWwiLCJlbmFibGVkIiwidHJpZ2dlclBvaW50IiwiZ3JvdXAiLCJHcm91cCIsImZpbmRPckNyZWF0ZSIsIm5hbWUiLCJjb250ZXh0IiwiQ29udGV4dCIsImZpbmRPckNyZWF0ZUJ5RWxlbWVudCIsIm9mZnNldEFsaWFzZXMiLCJvZmZzZXQiLCJhZGQiLCJhbGxXYXlwb2ludHMiLCJwcm90b3R5cGUiLCJxdWV1ZVRyaWdnZXIiLCJkaXJlY3Rpb24iLCJ0cmlnZ2VyIiwiYXJncyIsImFwcGx5IiwiZGVzdHJveSIsInJlbW92ZSIsImRpc2FibGUiLCJlbmFibGUiLCJyZWZyZXNoIiwibmV4dCIsInByZXZpb3VzIiwiaW52b2tlQWxsIiwibWV0aG9kIiwiYWxsV2F5cG9pbnRzQXJyYXkiLCJ3YXlwb2ludEtleSIsInB1c2giLCJpIiwiZW5kIiwibGVuZ3RoIiwiZGVzdHJveUFsbCIsImRpc2FibGVBbGwiLCJlbmFibGVBbGwiLCJyZWZyZXNoQWxsIiwidmlld3BvcnRIZWlnaHQiLCJ3aW5kb3ciLCJpbm5lckhlaWdodCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50SGVpZ2h0Iiwidmlld3BvcnRXaWR0aCIsImNsaWVudFdpZHRoIiwiYWRhcHRlcnMiLCJjb250aW51b3VzIiwiYm90dG9tLWluLXZpZXciLCJvdXRlckhlaWdodCIsInJpZ2h0LWluLXZpZXciLCJpbm5lcldpZHRoIiwib3V0ZXJXaWR0aCIsInJlcXVlc3RBbmltYXRpb25GcmFtZVNoaW0iLCJzZXRUaW1lb3V0IiwiZGlkU2Nyb2xsIiwiZGlkUmVzaXplIiwib2xkU2Nyb2xsIiwieCIsInNjcm9sbExlZnQiLCJ5Iiwic2Nyb2xsVG9wIiwid2F5cG9pbnRzIiwidmVydGljYWwiLCJ3YXlwb2ludENvbnRleHRLZXkiLCJjb250ZXh0cyIsImNyZWF0ZVRocm90dGxlZFNjcm9sbEhhbmRsZXIiLCJjcmVhdGVUaHJvdHRsZWRSZXNpemVIYW5kbGVyIiwib2xkV2luZG93TG9hZCIsIm9ubG9hZCIsIndheXBvaW50IiwiY2hlY2tFbXB0eSIsImhvcml6b250YWxFbXB0eSIsImlzRW1wdHlPYmplY3QiLCJ2ZXJ0aWNhbEVtcHR5Iiwib2ZmIiwicmVzaXplSGFuZGxlciIsInNlbGYiLCJoYW5kbGVSZXNpemUiLCJvbiIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNjcm9sbEhhbmRsZXIiLCJoYW5kbGVTY3JvbGwiLCJpc1RvdWNoIiwidHJpZ2dlcmVkR3JvdXBzIiwiYXhlcyIsIm5ld1Njcm9sbCIsImZvcndhcmQiLCJiYWNrd2FyZCIsImF4aXNLZXkiLCJpc0ZvcndhcmQiLCJ3YXNCZWZvcmVUcmlnZ2VyUG9pbnQiLCJub3dBZnRlclRyaWdnZXJQb2ludCIsImNyb3NzZWRGb3J3YXJkIiwiY3Jvc3NlZEJhY2t3YXJkIiwiaWQiLCJncm91cEtleSIsImZsdXNoVHJpZ2dlcnMiLCJpc1dpbmRvdyIsImNvbnRleHRPZmZzZXQiLCJ1bmRlZmluZWQiLCJsZWZ0IiwiY29udGV4dFNjcm9sbCIsImNvbnRleHREaW1lbnNpb24iLCJvZmZzZXRQcm9wIiwidG9wIiwiY29udGV4dE1vZGlmaWVyIiwid2FzQmVmb3JlU2Nyb2xsIiwibm93QWZ0ZXJTY3JvbGwiLCJ0cmlnZ2VyZWRCYWNrd2FyZCIsInRyaWdnZXJlZEZvcndhcmQiLCJhZGp1c3RtZW50Iiwib2xkVHJpZ2dlclBvaW50IiwiZWxlbWVudE9mZnNldCIsImZyZXNoV2F5cG9pbnQiLCJwYXJzZUZsb2F0IiwiaW5kZXhPZiIsIk1hdGgiLCJjZWlsIiwiZmluZEJ5RWxlbWVudCIsImNvbnRleHRJZCIsInJlcXVlc3RGbiIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbGwiLCJieVRyaWdnZXJQb2ludCIsImEiLCJiIiwiYnlSZXZlcnNlVHJpZ2dlclBvaW50IiwiY2xlYXJUcmlnZ2VyUXVldWVzIiwiZ3JvdXBzIiwidHJpZ2dlclF1ZXVlcyIsInVwIiwiZG93biIsInJpZ2h0IiwicmV2ZXJzZSIsInNvcnQiLCJpbmRleCIsImluQXJyYXkiLCJpc0xhc3QiLCJzcGxpY2UiLCJmaXJzdCIsImxhc3QiLCJKUXVlcnlBZGFwdGVyIiwiJGVsZW1lbnQiLCIkIiwialF1ZXJ5IiwiZWFjaCIsIkFycmF5Iiwic2xpY2UiLCJhcmd1bWVudHMiLCJjcmVhdGVFeHRlbnNpb24iLCJmcmFtZXdvcmsiLCJvdmVycmlkZXMiLCJpc0Z1bmN0aW9uIiwiY2xvc2VzdCIsImZuIiwiWmVwdG8iXSwibWFwcGluZ3MiOiJDQU1DLFdBQ0MsWUFNQSxTQUFTQSxHQUFTQyxHQUNoQixJQUFLQSxFQUNILEtBQU0sSUFBSUMsT0FBTSw0Q0FFbEIsS0FBS0QsRUFBUUUsUUFDWCxLQUFNLElBQUlELE9BQU0sbURBRWxCLEtBQUtELEVBQVFHLFFBQ1gsS0FBTSxJQUFJRixPQUFNLG1EQUdsQkcsTUFBS0MsSUFBTSxZQUFjQyxFQUN6QkYsS0FBS0osUUFBVUQsRUFBU1EsUUFBUUMsVUFBV1QsRUFBU1UsU0FBVVQsR0FDOURJLEtBQUtGLFFBQVVFLEtBQUtKLFFBQVFFLFFBQzVCRSxLQUFLTSxRQUFVLEdBQUlYLEdBQVNRLFFBQVFILEtBQUtGLFNBQ3pDRSxLQUFLTyxTQUFXWCxFQUFRRyxRQUN4QkMsS0FBS1EsS0FBT1IsS0FBS0osUUFBUWEsV0FBYSxhQUFlLFdBQ3JEVCxLQUFLVSxRQUFVVixLQUFLSixRQUFRYyxRQUM1QlYsS0FBS1csYUFBZSxLQUNwQlgsS0FBS1ksTUFBUWpCLEVBQVNrQixNQUFNQyxjQUMxQkMsS0FBTWYs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QUlqSyxHQUFVc0ssRUFBVTlKLFVBQVcrSixHQUNqQ3JLLFFBQVNFLE1BRW9CLGlCQUFwQkosR0FBUW9CLFVBQ2pCcEIsRUFBUW9CLFFBQVVrSixFQUFVbEssTUFBTXFLLFFBQVF6SyxFQUFRb0IsU0FBUyxJQUU3RHdELEVBQVVoQyxLQUFLLEdBQUk3QyxHQUFTQyxNQUd2QjRFLEdBdEJYLEdBQUk3RSxHQUFXc0QsT0FBT3RELFFBMEJsQnNELFFBQU8yRyxTQUNUM0csT0FBTzJHLE9BQU9VLEdBQUd0RixTQUFXaUYsRUFBZ0JoSCxPQUFPMkcsU0FFakQzRyxPQUFPc0gsUUFDVHRILE9BQU9zSCxNQUFNRCxHQUFHdEYsU0FBV2lGLEVBQWdCaEgsT0FBT3NIIiwiZmlsZSI6ImxpYi9pbWFrZXdlYnRoaW5ncy13YXlwb2ludHMtMDk0NGUxNS9saWIvanF1ZXJ5LndheXBvaW50cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbldheXBvaW50cyAtIDQuMC4wXG5Db3B5cmlnaHQgwqkgMjAxMS0yMDE1IENhbGViIFRyb3VnaHRvblxuTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaHR0cHM6Ly9naXRodWIuY29tL2ltYWtld2VidGhpbmdzL3dheXBvaW50cy9ibG9nL21hc3Rlci9saWNlbnNlcy50eHRcbiovXG4oZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIHZhciBrZXlDb3VudGVyID0gMFxuICB2YXIgYWxsV2F5cG9pbnRzID0ge31cblxuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvd2F5cG9pbnQgKi9cbiAgZnVuY3Rpb24gV2F5cG9pbnQob3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBvcHRpb25zIHBhc3NlZCB0byBXYXlwb2ludCBjb25zdHJ1Y3RvcicpXG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5lbGVtZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGVsZW1lbnQgb3B0aW9uIHBhc3NlZCB0byBXYXlwb2ludCBjb25zdHJ1Y3RvcicpXG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5oYW5kbGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGhhbmRsZXIgb3B0aW9uIHBhc3NlZCB0byBXYXlwb2ludCBjb25zdHJ1Y3RvcicpXG4gICAgfVxuXG4gICAgdGhpcy5rZXkgPSAnd2F5cG9pbnQtJyArIGtleUNvdW50ZXJcbiAgICB0aGlzLm9wdGlvbnMgPSBXYXlwb2ludC5BZGFwdGVyLmV4dGVuZCh7fSwgV2F5cG9pbnQuZGVmYXVsdHMsIG9wdGlvbnMpXG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy5vcHRpb25zLmVsZW1lbnRcbiAgICB0aGlzLmFkYXB0ZXIgPSBuZXcgV2F5cG9pbnQuQWRhcHRlcih0aGlzLmVsZW1lbnQpXG4gICAgdGhpcy5jYWxsYmFjayA9IG9wdGlvbnMuaGFuZGxlclxuICAgIHRoaXMuYXhpcyA9IHRoaXMub3B0aW9ucy5ob3Jpem9udGFsID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJ1xuICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMub3B0aW9ucy5lbmFibGVkXG4gICAgdGhpcy50cmlnZ2VyUG9pbnQgPSBudWxsXG4gICAgdGhpcy5ncm91cCA9IFdheXBvaW50Lkdyb3VwLmZpbmRPckNyZWF0ZSh7XG4gICAgICBuYW1lOiB0aGlzLm9wdGlvbnMuZ3JvdXAsXG4gICAgICBheGlzOiB0aGlzLmF4aXNcbiAgICB9KVxuICAgIHRoaXMuY29udGV4dCA9IFdheXBvaW50LkNvbnRleHQuZmluZE9yQ3JlYXRlQnlFbGVtZW50KHRoaXMub3B0aW9ucy5jb250ZXh0KVxuXG4gICAgaWYgKFdheXBvaW50Lm9mZnNldEFsaWFzZXNbdGhpcy5vcHRpb25zLm9mZnNldF0pIHtcbiAgICAgIHRoaXMub3B0aW9ucy5vZmZzZXQgPSBXYXlwb2ludC5vZmZzZXRBbGlhc2VzW3RoaXMub3B0aW9ucy5vZmZzZXRdXG4gICAgfVxuICAgIHRoaXMuZ3JvdXAuYWRkKHRoaXMpXG4gICAgdGhpcy5jb250ZXh0LmFkZCh0aGlzKVxuICAgIGFsbFdheXBvaW50c1t0aGlzLmtleV0gPSB0aGlzXG4gICAga2V5Q291bnRlciArPSAxXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIFdheXBvaW50LnByb3RvdHlwZS5xdWV1ZVRyaWdnZXIgPSBmdW5jdGlvbihkaXJlY3Rpb24pIHtcbiAgICB0aGlzLmdyb3VwLnF1ZXVlVHJpZ2dlcih0aGlzLCBkaXJlY3Rpb24pXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIFdheXBvaW50LnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oYXJncykge1xuICAgIGlmICghdGhpcy5lbmFibGVkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHRoaXMuY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuY2FsbGJhY2suYXBwbHkodGhpcywgYXJncylcbiAgICB9XG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2Rlc3Ryb3kgKi9cbiAgV2F5cG9pbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNvbnRleHQucmVtb3ZlKHRoaXMpXG4gICAgdGhpcy5ncm91cC5yZW1vdmUodGhpcylcbiAgICBkZWxldGUgYWxsV2F5cG9pbnRzW3RoaXMua2V5XVxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9kaXNhYmxlICovXG4gIFdheXBvaW50LnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5lbmFibGVkID0gZmFsc2VcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9lbmFibGUgKi9cbiAgV2F5cG9pbnQucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY29udGV4dC5yZWZyZXNoKClcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvbmV4dCAqL1xuICBXYXlwb2ludC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdyb3VwLm5leHQodGhpcylcbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvcHJldmlvdXMgKi9cbiAgV2F5cG9pbnQucHJvdG90eXBlLnByZXZpb3VzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ3JvdXAucHJldmlvdXModGhpcylcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgV2F5cG9pbnQuaW52b2tlQWxsID0gZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgdmFyIGFsbFdheXBvaW50c0FycmF5ID0gW11cbiAgICBmb3IgKHZhciB3YXlwb2ludEtleSBpbiBhbGxXYXlwb2ludHMpIHtcbiAgICAgIGFsbFdheXBvaW50c0FycmF5LnB1c2goYWxsV2F5cG9pbnRzW3dheXBvaW50S2V5XSlcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGVuZCA9IGFsbFdheXBvaW50c0FycmF5Lmxlbmd0aDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICBhbGxXYXlwb2ludHNBcnJheVtpXVttZXRob2RdKClcbiAgICB9XG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2Rlc3Ryb3ktYWxsICovXG4gIFdheXBvaW50LmRlc3Ryb3lBbGwgPSBmdW5jdGlvbigpIHtcbiAgICBXYXlwb2ludC5pbnZva2VBbGwoJ2Rlc3Ryb3knKVxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9kaXNhYmxlLWFsbCAqL1xuICBXYXlwb2ludC5kaXNhYmxlQWxsID0gZnVuY3Rpb24oKSB7XG4gICAgV2F5cG9pbnQuaW52b2tlQWxsKCdkaXNhYmxlJylcbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZW5hYmxlLWFsbCAqL1xuICBXYXlwb2ludC5lbmFibGVBbGwgPSBmdW5jdGlvbigpIHtcbiAgICBXYXlwb2ludC5pbnZva2VBbGwoJ2VuYWJsZScpXG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL3JlZnJlc2gtYWxsICovXG4gIFdheXBvaW50LnJlZnJlc2hBbGwgPSBmdW5jdGlvbigpIHtcbiAgICBXYXlwb2ludC5Db250ZXh0LnJlZnJlc2hBbGwoKVxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS92aWV3cG9ydC1oZWlnaHQgKi9cbiAgV2F5cG9pbnQudmlld3BvcnRIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRcbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvdmlld3BvcnQtd2lkdGggKi9cbiAgV2F5cG9pbnQudmlld3BvcnRXaWR0aCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGhcbiAgfVxuXG4gIFdheXBvaW50LmFkYXB0ZXJzID0gW11cblxuICBXYXlwb2ludC5kZWZhdWx0cyA9IHtcbiAgICBjb250ZXh0OiB3aW5kb3csXG4gICAgY29udGludW91czogdHJ1ZSxcbiAgICBlbmFibGVkOiB0cnVlLFxuICAgIGdyb3VwOiAnZGVmYXVsdCcsXG4gICAgaG9yaXpvbnRhbDogZmFsc2UsXG4gICAgb2Zmc2V0OiAwXG4gIH1cblxuICBXYXlwb2ludC5vZmZzZXRBbGlhc2VzID0ge1xuICAgICdib3R0b20taW4tdmlldyc6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5pbm5lckhlaWdodCgpIC0gdGhpcy5hZGFwdGVyLm91dGVySGVpZ2h0KClcbiAgICB9LFxuICAgICdyaWdodC1pbi12aWV3JzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmlubmVyV2lkdGgoKSAtIHRoaXMuYWRhcHRlci5vdXRlcldpZHRoKClcbiAgICB9XG4gIH1cblxuICB3aW5kb3cuV2F5cG9pbnQgPSBXYXlwb2ludFxufSgpKVxuOyhmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgZnVuY3Rpb24gcmVxdWVzdEFuaW1hdGlvbkZyYW1lU2hpbShjYWxsYmFjaykge1xuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNhbGxiYWNrLCAxMDAwIC8gNjApXG4gIH1cblxuICB2YXIga2V5Q291bnRlciA9IDBcbiAgdmFyIGNvbnRleHRzID0ge31cbiAgdmFyIFdheXBvaW50ID0gd2luZG93LldheXBvaW50XG4gIHZhciBvbGRXaW5kb3dMb2FkID0gd2luZG93Lm9ubG9hZFxuXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9jb250ZXh0ICovXG4gIGZ1bmN0aW9uIENvbnRleHQoZWxlbWVudCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnRcbiAgICB0aGlzLkFkYXB0ZXIgPSBXYXlwb2ludC5BZGFwdGVyXG4gICAgdGhpcy5hZGFwdGVyID0gbmV3IHRoaXMuQWRhcHRlcihlbGVtZW50KVxuICAgIHRoaXMua2V5ID0gJ3dheXBvaW50LWNvbnRleHQtJyArIGtleUNvdW50ZXJcbiAgICB0aGlzLmRpZFNjcm9sbCA9IGZhbHNlXG4gICAgdGhpcy5kaWRSZXNpemUgPSBmYWxzZVxuICAgIHRoaXMub2xkU2Nyb2xsID0ge1xuICAgICAgeDogdGhpcy5hZGFwdGVyLnNjcm9sbExlZnQoKSxcbiAgICAgIHk6IHRoaXMuYWRhcHRlci5zY3JvbGxUb3AoKVxuICAgIH1cbiAgICB0aGlzLndheXBvaW50cyA9IHtcbiAgICAgIHZlcnRpY2FsOiB7fSxcbiAgICAgIGhvcml6b250YWw6IHt9XG4gICAgfVxuXG4gICAgZWxlbWVudC53YXlwb2ludENvbnRleHRLZXkgPSB0aGlzLmtleVxuICAgIGNvbnRleHRzW2VsZW1lbnQud2F5cG9pbnRDb250ZXh0S2V5XSA9IHRoaXNcbiAgICBrZXlDb3VudGVyICs9IDFcblxuICAgIHRoaXMuY3JlYXRlVGhyb3R0bGVkU2Nyb2xsSGFuZGxlcigpXG4gICAgdGhpcy5jcmVhdGVUaHJvdHRsZWRSZXNpemVIYW5kbGVyKClcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgQ29udGV4dC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24od2F5cG9pbnQpIHtcbiAgICB2YXIgYXhpcyA9IHdheXBvaW50Lm9wdGlvbnMuaG9yaXpvbnRhbCA/ICdob3Jpem9udGFsJyA6ICd2ZXJ0aWNhbCdcbiAgICB0aGlzLndheXBvaW50c1theGlzXVt3YXlwb2ludC5rZXldID0gd2F5cG9pbnRcbiAgICB0aGlzLnJlZnJlc2goKVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBDb250ZXh0LnByb3RvdHlwZS5jaGVja0VtcHR5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhvcml6b250YWxFbXB0eSA9IHRoaXMuQWRhcHRlci5pc0VtcHR5T2JqZWN0KHRoaXMud2F5cG9pbnRzLmhvcml6b250YWwpXG4gICAgdmFyIHZlcnRpY2FsRW1wdHkgPSB0aGlzLkFkYXB0ZXIuaXNFbXB0eU9iamVjdCh0aGlzLndheXBvaW50cy52ZXJ0aWNhbClcbiAgICBpZiAoaG9yaXpvbnRhbEVtcHR5ICYmIHZlcnRpY2FsRW1wdHkpIHtcbiAgICAgIHRoaXMuYWRhcHRlci5vZmYoJy53YXlwb2ludHMnKVxuICAgICAgZGVsZXRlIGNvbnRleHRzW3RoaXMua2V5XVxuICAgIH1cbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlVGhyb3R0bGVkUmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpc1xuXG4gICAgZnVuY3Rpb24gcmVzaXplSGFuZGxlcigpIHtcbiAgICAgIHNlbGYuaGFuZGxlUmVzaXplKClcbiAgICAgIHNlbGYuZGlkUmVzaXplID0gZmFsc2VcbiAgICB9XG5cbiAgICB0aGlzLmFkYXB0ZXIub24oJ3Jlc2l6ZS53YXlwb2ludHMnLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghc2VsZi5kaWRSZXNpemUpIHtcbiAgICAgICAgc2VsZi5kaWRSZXNpemUgPSB0cnVlXG4gICAgICAgIFdheXBvaW50LnJlcXVlc3RBbmltYXRpb25GcmFtZShyZXNpemVIYW5kbGVyKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIENvbnRleHQucHJvdG90eXBlLmNyZWF0ZVRocm90dGxlZFNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXNcbiAgICBmdW5jdGlvbiBzY3JvbGxIYW5kbGVyKCkge1xuICAgICAgc2VsZi5oYW5kbGVTY3JvbGwoKVxuICAgICAgc2VsZi5kaWRTY3JvbGwgPSBmYWxzZVxuICAgIH1cblxuICAgIHRoaXMuYWRhcHRlci5vbignc2Nyb2xsLndheXBvaW50cycsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFzZWxmLmRpZFNjcm9sbCB8fCBXYXlwb2ludC5pc1RvdWNoKSB7XG4gICAgICAgIHNlbGYuZGlkU2Nyb2xsID0gdHJ1ZVxuICAgICAgICBXYXlwb2ludC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2Nyb2xsSGFuZGxlcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBDb250ZXh0LnByb3RvdHlwZS5oYW5kbGVSZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgICBXYXlwb2ludC5Db250ZXh0LnJlZnJlc2hBbGwoKVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBDb250ZXh0LnByb3RvdHlwZS5oYW5kbGVTY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdHJpZ2dlcmVkR3JvdXBzID0ge31cbiAgICB2YXIgYXhlcyA9IHtcbiAgICAgIGhvcml6b250YWw6IHtcbiAgICAgICAgbmV3U2Nyb2xsOiB0aGlzLmFkYXB0ZXIuc2Nyb2xsTGVmdCgpLFxuICAgICAgICBvbGRTY3JvbGw6IHRoaXMub2xkU2Nyb2xsLngsXG4gICAgICAgIGZvcndhcmQ6ICdyaWdodCcsXG4gICAgICAgIGJhY2t3YXJkOiAnbGVmdCdcbiAgICAgIH0sXG4gICAgICB2ZXJ0aWNhbDoge1xuICAgICAgICBuZXdTY3JvbGw6IHRoaXMuYWRhcHRlci5zY3JvbGxUb3AoKSxcbiAgICAgICAgb2xkU2Nyb2xsOiB0aGlzLm9sZFNjcm9sbC55LFxuICAgICAgICBmb3J3YXJkOiAnZG93bicsXG4gICAgICAgIGJhY2t3YXJkOiAndXAnXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgYXhpc0tleSBpbiBheGVzKSB7XG4gICAgICB2YXIgYXhpcyA9IGF4ZXNbYXhpc0tleV1cbiAgICAgIHZhciBpc0ZvcndhcmQgPSBheGlzLm5ld1Njcm9sbCA+IGF4aXMub2xkU2Nyb2xsXG4gICAgICB2YXIgZGlyZWN0aW9uID0gaXNGb3J3YXJkID8gYXhpcy5mb3J3YXJkIDogYXhpcy5iYWNrd2FyZFxuXG4gICAgICBmb3IgKHZhciB3YXlwb2ludEtleSBpbiB0aGlzLndheXBvaW50c1theGlzS2V5XSkge1xuICAgICAgICB2YXIgd2F5cG9pbnQgPSB0aGlzLndheXBvaW50c1theGlzS2V5XVt3YXlwb2ludEtleV1cbiAgICAgICAgdmFyIHdhc0JlZm9yZVRyaWdnZXJQb2ludCA9IGF4aXMub2xkU2Nyb2xsIDwgd2F5cG9pbnQudHJpZ2dlclBvaW50XG4gICAgICAgIHZhciBub3dBZnRlclRyaWdnZXJQb2ludCA9IGF4aXMubmV3U2Nyb2xsID49IHdheXBvaW50LnRyaWdnZXJQb2ludFxuICAgICAgICB2YXIgY3Jvc3NlZEZvcndhcmQgPSB3YXNCZWZvcmVUcmlnZ2VyUG9pbnQgJiYgbm93QWZ0ZXJUcmlnZ2VyUG9pbnRcbiAgICAgICAgdmFyIGNyb3NzZWRCYWNrd2FyZCA9ICF3YXNCZWZvcmVUcmlnZ2VyUG9pbnQgJiYgIW5vd0FmdGVyVHJpZ2dlclBvaW50XG4gICAgICAgIGlmIChjcm9zc2VkRm9yd2FyZCB8fCBjcm9zc2VkQmFja3dhcmQpIHtcbiAgICAgICAgICB3YXlwb2ludC5xdWV1ZVRyaWdnZXIoZGlyZWN0aW9uKVxuICAgICAgICAgIHRyaWdnZXJlZEdyb3Vwc1t3YXlwb2ludC5ncm91cC5pZF0gPSB3YXlwb2ludC5ncm91cFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgZ3JvdXBLZXkgaW4gdHJpZ2dlcmVkR3JvdXBzKSB7XG4gICAgICB0cmlnZ2VyZWRHcm91cHNbZ3JvdXBLZXldLmZsdXNoVHJpZ2dlcnMoKVxuICAgIH1cblxuICAgIHRoaXMub2xkU2Nyb2xsID0ge1xuICAgICAgeDogYXhlcy5ob3Jpem9udGFsLm5ld1Njcm9sbCxcbiAgICAgIHk6IGF4ZXMudmVydGljYWwubmV3U2Nyb2xsXG4gICAgfVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBDb250ZXh0LnByb3RvdHlwZS5pbm5lckhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIC8qZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgaWYgKHRoaXMuZWxlbWVudCA9PSB0aGlzLmVsZW1lbnQud2luZG93KSB7XG4gICAgICByZXR1cm4gV2F5cG9pbnQudmlld3BvcnRIZWlnaHQoKVxuICAgIH1cbiAgICAvKmVzbGludC1lbmFibGUgZXFlcWVxICovXG4gICAgcmV0dXJuIHRoaXMuYWRhcHRlci5pbm5lckhlaWdodCgpXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIENvbnRleHQucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKHdheXBvaW50KSB7XG4gICAgZGVsZXRlIHRoaXMud2F5cG9pbnRzW3dheXBvaW50LmF4aXNdW3dheXBvaW50LmtleV1cbiAgICB0aGlzLmNoZWNrRW1wdHkoKVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBDb250ZXh0LnByb3RvdHlwZS5pbm5lcldpZHRoID0gZnVuY3Rpb24oKSB7XG4gICAgLyplc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cbiAgICBpZiAodGhpcy5lbGVtZW50ID09IHRoaXMuZWxlbWVudC53aW5kb3cpIHtcbiAgICAgIHJldHVybiBXYXlwb2ludC52aWV3cG9ydFdpZHRoKClcbiAgICB9XG4gICAgLyplc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuICAgIHJldHVybiB0aGlzLmFkYXB0ZXIuaW5uZXJXaWR0aCgpXG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2NvbnRleHQtZGVzdHJveSAqL1xuICBDb250ZXh0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFsbFdheXBvaW50cyA9IFtdXG4gICAgZm9yICh2YXIgYXhpcyBpbiB0aGlzLndheXBvaW50cykge1xuICAgICAgZm9yICh2YXIgd2F5cG9pbnRLZXkgaW4gdGhpcy53YXlwb2ludHNbYXhpc10pIHtcbiAgICAgICAgYWxsV2F5cG9pbnRzLnB1c2godGhpcy53YXlwb2ludHNbYXhpc11bd2F5cG9pbnRLZXldKVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgZW5kID0gYWxsV2F5cG9pbnRzLmxlbmd0aDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICBhbGxXYXlwb2ludHNbaV0uZGVzdHJveSgpXG4gICAgfVxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9jb250ZXh0LXJlZnJlc2ggKi9cbiAgQ29udGV4dC5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuICAgIC8qZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgdmFyIGlzV2luZG93ID0gdGhpcy5lbGVtZW50ID09IHRoaXMuZWxlbWVudC53aW5kb3dcbiAgICAvKmVzbGludC1lbmFibGUgZXFlcWVxICovXG4gICAgdmFyIGNvbnRleHRPZmZzZXQgPSBpc1dpbmRvdyA/IHVuZGVmaW5lZCA6IHRoaXMuYWRhcHRlci5vZmZzZXQoKVxuICAgIHZhciB0cmlnZ2VyZWRHcm91cHMgPSB7fVxuICAgIHZhciBheGVzXG5cbiAgICB0aGlzLmhhbmRsZVNjcm9sbCgpXG4gICAgYXhlcyA9IHtcbiAgICAgIGhvcml6b250YWw6IHtcbiAgICAgICAgY29udGV4dE9mZnNldDogaXNXaW5kb3cgPyAwIDogY29udGV4dE9mZnNldC5sZWZ0LFxuICAgICAgICBjb250ZXh0U2Nyb2xsOiBpc1dpbmRvdyA/IDAgOiB0aGlzLm9sZFNjcm9sbC54LFxuICAgICAgICBjb250ZXh0RGltZW5zaW9uOiB0aGlzLmlubmVyV2lkdGgoKSxcbiAgICAgICAgb2xkU2Nyb2xsOiB0aGlzLm9sZFNjcm9sbC54LFxuICAgICAgICBmb3J3YXJkOiAncmlnaHQnLFxuICAgICAgICBiYWNrd2FyZDogJ2xlZnQnLFxuICAgICAgICBvZmZzZXRQcm9wOiAnbGVmdCdcbiAgICAgIH0sXG4gICAgICB2ZXJ0aWNhbDoge1xuICAgICAgICBjb250ZXh0T2Zmc2V0OiBpc1dpbmRvdyA/IDAgOiBjb250ZXh0T2Zmc2V0LnRvcCxcbiAgICAgICAgY29udGV4dFNjcm9sbDogaXNXaW5kb3cgPyAwIDogdGhpcy5vbGRTY3JvbGwueSxcbiAgICAgICAgY29udGV4dERpbWVuc2lvbjogdGhpcy5pbm5lckhlaWdodCgpLFxuICAgICAgICBvbGRTY3JvbGw6IHRoaXMub2xkU2Nyb2xsLnksXG4gICAgICAgIGZvcndhcmQ6ICdkb3duJyxcbiAgICAgICAgYmFja3dhcmQ6ICd1cCcsXG4gICAgICAgIG9mZnNldFByb3A6ICd0b3AnXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgYXhpc0tleSBpbiBheGVzKSB7XG4gICAgICB2YXIgYXhpcyA9IGF4ZXNbYXhpc0tleV1cbiAgICAgIGZvciAodmFyIHdheXBvaW50S2V5IGluIHRoaXMud2F5cG9pbnRzW2F4aXNLZXldKSB7XG4gICAgICAgIHZhciB3YXlwb2ludCA9IHRoaXMud2F5cG9pbnRzW2F4aXNLZXldW3dheXBvaW50S2V5XVxuICAgICAgICB2YXIgYWRqdXN0bWVudCA9IHdheXBvaW50Lm9wdGlvbnMub2Zmc2V0XG4gICAgICAgIHZhciBvbGRUcmlnZ2VyUG9pbnQgPSB3YXlwb2ludC50cmlnZ2VyUG9pbnRcbiAgICAgICAgdmFyIGVsZW1lbnRPZmZzZXQgPSAwXG4gICAgICAgIHZhciBmcmVzaFdheXBvaW50ID0gb2xkVHJpZ2dlclBvaW50ID09IG51bGxcbiAgICAgICAgdmFyIGNvbnRleHRNb2RpZmllciwgd2FzQmVmb3JlU2Nyb2xsLCBub3dBZnRlclNjcm9sbFxuICAgICAgICB2YXIgdHJpZ2dlcmVkQmFja3dhcmQsIHRyaWdnZXJlZEZvcndhcmRcblxuICAgICAgICBpZiAod2F5cG9pbnQuZWxlbWVudCAhPT0gd2F5cG9pbnQuZWxlbWVudC53aW5kb3cpIHtcbiAgICAgICAgICBlbGVtZW50T2Zmc2V0ID0gd2F5cG9pbnQuYWRhcHRlci5vZmZzZXQoKVtheGlzLm9mZnNldFByb3BdXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGFkanVzdG1lbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBhZGp1c3RtZW50ID0gYWRqdXN0bWVudC5hcHBseSh3YXlwb2ludClcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgYWRqdXN0bWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBhZGp1c3RtZW50ID0gcGFyc2VGbG9hdChhZGp1c3RtZW50KVxuICAgICAgICAgIGlmICh3YXlwb2ludC5vcHRpb25zLm9mZnNldC5pbmRleE9mKCclJykgPiAtIDEpIHtcbiAgICAgICAgICAgIGFkanVzdG1lbnQgPSBNYXRoLmNlaWwoYXhpcy5jb250ZXh0RGltZW5zaW9uICogYWRqdXN0bWVudCAvIDEwMClcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0TW9kaWZpZXIgPSBheGlzLmNvbnRleHRTY3JvbGwgLSBheGlzLmNvbnRleHRPZmZzZXRcbiAgICAgICAgd2F5cG9pbnQudHJpZ2dlclBvaW50ID0gZWxlbWVudE9mZnNldCArIGNvbnRleHRNb2RpZmllciAtIGFkanVzdG1lbnRcbiAgICAgICAgd2FzQmVmb3JlU2Nyb2xsID0gb2xkVHJpZ2dlclBvaW50IDwgYXhpcy5vbGRTY3JvbGxcbiAgICAgICAgbm93QWZ0ZXJTY3JvbGwgPSB3YXlwb2ludC50cmlnZ2VyUG9pbnQgPj0gYXhpcy5vbGRTY3JvbGxcbiAgICAgICAgdHJpZ2dlcmVkQmFja3dhcmQgPSB3YXNCZWZvcmVTY3JvbGwgJiYgbm93QWZ0ZXJTY3JvbGxcbiAgICAgICAgdHJpZ2dlcmVkRm9yd2FyZCA9ICF3YXNCZWZvcmVTY3JvbGwgJiYgIW5vd0FmdGVyU2Nyb2xsXG5cbiAgICAgICAgaWYgKCFmcmVzaFdheXBvaW50ICYmIHRyaWdnZXJlZEJhY2t3YXJkKSB7XG4gICAgICAgICAgd2F5cG9pbnQucXVldWVUcmlnZ2VyKGF4aXMuYmFja3dhcmQpXG4gICAgICAgICAgdHJpZ2dlcmVkR3JvdXBzW3dheXBvaW50Lmdyb3VwLmlkXSA9IHdheXBvaW50Lmdyb3VwXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWZyZXNoV2F5cG9pbnQgJiYgdHJpZ2dlcmVkRm9yd2FyZCkge1xuICAgICAgICAgIHdheXBvaW50LnF1ZXVlVHJpZ2dlcihheGlzLmZvcndhcmQpXG4gICAgICAgICAgdHJpZ2dlcmVkR3JvdXBzW3dheXBvaW50Lmdyb3VwLmlkXSA9IHdheXBvaW50Lmdyb3VwXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZnJlc2hXYXlwb2ludCAmJiBheGlzLm9sZFNjcm9sbCA+PSB3YXlwb2ludC50cmlnZ2VyUG9pbnQpIHtcbiAgICAgICAgICB3YXlwb2ludC5xdWV1ZVRyaWdnZXIoYXhpcy5mb3J3YXJkKVxuICAgICAgICAgIHRyaWdnZXJlZEdyb3Vwc1t3YXlwb2ludC5ncm91cC5pZF0gPSB3YXlwb2ludC5ncm91cFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgV2F5cG9pbnQucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgZ3JvdXBLZXkgaW4gdHJpZ2dlcmVkR3JvdXBzKSB7XG4gICAgICAgIHRyaWdnZXJlZEdyb3Vwc1tncm91cEtleV0uZmx1c2hUcmlnZ2VycygpXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIENvbnRleHQuZmluZE9yQ3JlYXRlQnlFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIHJldHVybiBDb250ZXh0LmZpbmRCeUVsZW1lbnQoZWxlbWVudCkgfHwgbmV3IENvbnRleHQoZWxlbWVudClcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgQ29udGV4dC5yZWZyZXNoQWxsID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgY29udGV4dElkIGluIGNvbnRleHRzKSB7XG4gICAgICBjb250ZXh0c1tjb250ZXh0SWRdLnJlZnJlc2goKVxuICAgIH1cbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvY29udGV4dC1maW5kLWJ5LWVsZW1lbnQgKi9cbiAgQ29udGV4dC5maW5kQnlFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIHJldHVybiBjb250ZXh0c1tlbGVtZW50LndheXBvaW50Q29udGV4dEtleV1cbiAgfVxuXG4gIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAob2xkV2luZG93TG9hZCkge1xuICAgICAgb2xkV2luZG93TG9hZCgpXG4gICAgfVxuICAgIENvbnRleHQucmVmcmVzaEFsbCgpXG4gIH1cblxuICBXYXlwb2ludC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciByZXF1ZXN0Rm4gPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWVTaGltXG4gICAgcmVxdWVzdEZuLmNhbGwod2luZG93LCBjYWxsYmFjaylcbiAgfVxuICBXYXlwb2ludC5Db250ZXh0ID0gQ29udGV4dFxufSgpKVxuOyhmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgZnVuY3Rpb24gYnlUcmlnZ2VyUG9pbnQoYSwgYikge1xuICAgIHJldHVybiBhLnRyaWdnZXJQb2ludCAtIGIudHJpZ2dlclBvaW50XG4gIH1cblxuICBmdW5jdGlvbiBieVJldmVyc2VUcmlnZ2VyUG9pbnQoYSwgYikge1xuICAgIHJldHVybiBiLnRyaWdnZXJQb2ludCAtIGEudHJpZ2dlclBvaW50XG4gIH1cblxuICB2YXIgZ3JvdXBzID0ge1xuICAgIHZlcnRpY2FsOiB7fSxcbiAgICBob3Jpem9udGFsOiB7fVxuICB9XG4gIHZhciBXYXlwb2ludCA9IHdpbmRvdy5XYXlwb2ludFxuXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9ncm91cCAqL1xuICBmdW5jdGlvbiBHcm91cChvcHRpb25zKSB7XG4gICAgdGhpcy5uYW1lID0gb3B0aW9ucy5uYW1lXG4gICAgdGhpcy5heGlzID0gb3B0aW9ucy5heGlzXG4gICAgdGhpcy5pZCA9IHRoaXMubmFtZSArICctJyArIHRoaXMuYXhpc1xuICAgIHRoaXMud2F5cG9pbnRzID0gW11cbiAgICB0aGlzLmNsZWFyVHJpZ2dlclF1ZXVlcygpXG4gICAgZ3JvdXBzW3RoaXMuYXhpc11bdGhpcy5uYW1lXSA9IHRoaXNcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgR3JvdXAucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHdheXBvaW50KSB7XG4gICAgdGhpcy53YXlwb2ludHMucHVzaCh3YXlwb2ludClcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgR3JvdXAucHJvdG90eXBlLmNsZWFyVHJpZ2dlclF1ZXVlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudHJpZ2dlclF1ZXVlcyA9IHtcbiAgICAgIHVwOiBbXSxcbiAgICAgIGRvd246IFtdLFxuICAgICAgbGVmdDogW10sXG4gICAgICByaWdodDogW11cbiAgICB9XG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIEdyb3VwLnByb3RvdHlwZS5mbHVzaFRyaWdnZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgZGlyZWN0aW9uIGluIHRoaXMudHJpZ2dlclF1ZXVlcykge1xuICAgICAgdmFyIHdheXBvaW50cyA9IHRoaXMudHJpZ2dlclF1ZXVlc1tkaXJlY3Rpb25dXG4gICAgICB2YXIgcmV2ZXJzZSA9IGRpcmVjdGlvbiA9PT0gJ3VwJyB8fCBkaXJlY3Rpb24gPT09ICdsZWZ0J1xuICAgICAgd2F5cG9pbnRzLnNvcnQocmV2ZXJzZSA/IGJ5UmV2ZXJzZVRyaWdnZXJQb2ludCA6IGJ5VHJpZ2dlclBvaW50KVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGVuZCA9IHdheXBvaW50cy5sZW5ndGg7IGkgPCBlbmQ7IGkgKz0gMSkge1xuICAgICAgICB2YXIgd2F5cG9pbnQgPSB3YXlwb2ludHNbaV1cbiAgICAgICAgaWYgKHdheXBvaW50Lm9wdGlvbnMuY29udGludW91cyB8fCBpID09PSB3YXlwb2ludHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHdheXBvaW50LnRyaWdnZXIoW2RpcmVjdGlvbl0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jbGVhclRyaWdnZXJRdWV1ZXMoKVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBHcm91cC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKHdheXBvaW50KSB7XG4gICAgdGhpcy53YXlwb2ludHMuc29ydChieVRyaWdnZXJQb2ludClcbiAgICB2YXIgaW5kZXggPSBXYXlwb2ludC5BZGFwdGVyLmluQXJyYXkod2F5cG9pbnQsIHRoaXMud2F5cG9pbnRzKVxuICAgIHZhciBpc0xhc3QgPSBpbmRleCA9PT0gdGhpcy53YXlwb2ludHMubGVuZ3RoIC0gMVxuICAgIHJldHVybiBpc0xhc3QgPyBudWxsIDogdGhpcy53YXlwb2ludHNbaW5kZXggKyAxXVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBHcm91cC5wcm90b3R5cGUucHJldmlvdXMgPSBmdW5jdGlvbih3YXlwb2ludCkge1xuICAgIHRoaXMud2F5cG9pbnRzLnNvcnQoYnlUcmlnZ2VyUG9pbnQpXG4gICAgdmFyIGluZGV4ID0gV2F5cG9pbnQuQWRhcHRlci5pbkFycmF5KHdheXBvaW50LCB0aGlzLndheXBvaW50cylcbiAgICByZXR1cm4gaW5kZXggPyB0aGlzLndheXBvaW50c1tpbmRleCAtIDFdIDogbnVsbFxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBHcm91cC5wcm90b3R5cGUucXVldWVUcmlnZ2VyID0gZnVuY3Rpb24od2F5cG9pbnQsIGRpcmVjdGlvbikge1xuICAgIHRoaXMudHJpZ2dlclF1ZXVlc1tkaXJlY3Rpb25dLnB1c2god2F5cG9pbnQpXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIEdyb3VwLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbih3YXlwb2ludCkge1xuICAgIHZhciBpbmRleCA9IFdheXBvaW50LkFkYXB0ZXIuaW5BcnJheSh3YXlwb2ludCwgdGhpcy53YXlwb2ludHMpXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHRoaXMud2F5cG9pbnRzLnNwbGljZShpbmRleCwgMSlcbiAgICB9XG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2ZpcnN0ICovXG4gIEdyb3VwLnByb3RvdHlwZS5maXJzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLndheXBvaW50c1swXVxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9sYXN0ICovXG4gIEdyb3VwLnByb3RvdHlwZS5sYXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMud2F5cG9pbnRzW3RoaXMud2F5cG9pbnRzLmxlbmd0aCAtIDFdXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIEdyb3VwLmZpbmRPckNyZWF0ZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZ3JvdXBzW29wdGlvbnMuYXhpc11bb3B0aW9ucy5uYW1lXSB8fCBuZXcgR3JvdXAob3B0aW9ucylcbiAgfVxuXG4gIFdheXBvaW50Lkdyb3VwID0gR3JvdXBcbn0oKSlcbjsoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIHZhciAkID0gd2luZG93LmpRdWVyeVxuICB2YXIgV2F5cG9pbnQgPSB3aW5kb3cuV2F5cG9pbnRcblxuICBmdW5jdGlvbiBKUXVlcnlBZGFwdGVyKGVsZW1lbnQpIHtcbiAgICB0aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KVxuICB9XG5cbiAgJC5lYWNoKFtcbiAgICAnaW5uZXJIZWlnaHQnLFxuICAgICdpbm5lcldpZHRoJyxcbiAgICAnb2ZmJyxcbiAgICAnb2Zmc2V0JyxcbiAgICAnb24nLFxuICAgICdvdXRlckhlaWdodCcsXG4gICAgJ291dGVyV2lkdGgnLFxuICAgICdzY3JvbGxMZWZ0JyxcbiAgICAnc2Nyb2xsVG9wJ1xuICBdLCBmdW5jdGlvbihpLCBtZXRob2QpIHtcbiAgICBKUXVlcnlBZGFwdGVyLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICAgIHJldHVybiB0aGlzLiRlbGVtZW50W21ldGhvZF0uYXBwbHkodGhpcy4kZWxlbWVudCwgYXJncylcbiAgICB9XG4gIH0pXG5cbiAgJC5lYWNoKFtcbiAgICAnZXh0ZW5kJyxcbiAgICAnaW5BcnJheScsXG4gICAgJ2lzRW1wdHlPYmplY3QnXG4gIF0sIGZ1bmN0aW9uKGksIG1ldGhvZCkge1xuICAgIEpRdWVyeUFkYXB0ZXJbbWV0aG9kXSA9ICRbbWV0aG9kXVxuICB9KVxuXG4gIFdheXBvaW50LmFkYXB0ZXJzLnB1c2goe1xuICAgIG5hbWU6ICdqcXVlcnknLFxuICAgIEFkYXB0ZXI6IEpRdWVyeUFkYXB0ZXJcbiAgfSlcbiAgV2F5cG9pbnQuQWRhcHRlciA9IEpRdWVyeUFkYXB0ZXJcbn0oKSlcbjsoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIHZhciBXYXlwb2ludCA9IHdpbmRvdy5XYXlwb2ludFxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUV4dGVuc2lvbihmcmFtZXdvcmspIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgd2F5cG9pbnRzID0gW11cbiAgICAgIHZhciBvdmVycmlkZXMgPSBhcmd1bWVudHNbMF1cblxuICAgICAgaWYgKGZyYW1ld29yay5pc0Z1bmN0aW9uKGFyZ3VtZW50c1swXSkpIHtcbiAgICAgICAgb3ZlcnJpZGVzID0gZnJhbWV3b3JrLmV4dGVuZCh7fSwgYXJndW1lbnRzWzFdKVxuICAgICAgICBvdmVycmlkZXMuaGFuZGxlciA9IGFyZ3VtZW50c1swXVxuICAgICAgfVxuXG4gICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gZnJhbWV3b3JrLmV4dGVuZCh7fSwgb3ZlcnJpZGVzLCB7XG4gICAgICAgICAgZWxlbWVudDogdGhpc1xuICAgICAgICB9KVxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuY29udGV4dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBvcHRpb25zLmNvbnRleHQgPSBmcmFtZXdvcmsodGhpcykuY2xvc2VzdChvcHRpb25zLmNvbnRleHQpWzBdXG4gICAgICAgIH1cbiAgICAgICAgd2F5cG9pbnRzLnB1c2gobmV3IFdheXBvaW50KG9wdGlvbnMpKVxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHdheXBvaW50c1xuICAgIH1cbiAgfVxuXG4gIGlmICh3aW5kb3cualF1ZXJ5KSB7XG4gICAgd2luZG93LmpRdWVyeS5mbi53YXlwb2ludCA9IGNyZWF0ZUV4dGVuc2lvbih3aW5kb3cualF1ZXJ5KVxuICB9XG4gIGlmICh3aW5kb3cuWmVwdG8pIHtcbiAgICB3aW5kb3cuWmVwdG8uZm4ud2F5cG9pbnQgPSBjcmVhdGVFeHRlbnNpb24od2luZG93LlplcHRvKVxuICB9XG59KCkpXG47Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
